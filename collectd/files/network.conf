{% endif %}
LoadPlugin network

<Plugin network>
#   # client setup:
{% for server in servers %}
    <Server "{{ server.host }}" "{% if port in server %}{{ server.port }}{% else %}25826{% endif %}">
{% if SecurityLevel in server %}        SecurityLevel {{ server.SecurityLevel }}{% endif %}
{% if Username in server %}        Username "{{ server.Username }}"{% endif %}
{% if Password in server %}        Password "{{ server.Password }}"{% endif %}
{% if Interface in server %}        Interface "{{ server.Interface }}"{% endif %}
    </Server>
{% endfor %}
#   TimeToLive "128"
#
#   # server setup:
{% if salt['grains.get']('roles:collectd_server') %}
{% for listen in listens %}
    <Listen "{{ listen.host }}" "{% if port in listen %}{{ listen.port }}{% else %}25826{% endif %}">
{% if SecurityLevel in listen %}        SecurityLevel {{ listen.SecurityLevel }}{% endif %}
{% if AuthFile in listen %}        AuthFile "{{ listen.AuthFile }}"{% endif %}
{% if Interface in listen %}        Interface "{{ listen.Interface }}"{% endif %}
    </Server>
{% endfor %}
{% endif %}
#   MaxPacketSize 1024
#
#   # proxy setup (client and server as above):
#   Forward true
#
#   # statistics about the network plugin itself
    ReportStats {{ ReportStats }}
#
#   # "garbage collection"
#   CacheFlush 1800
</Plugin>
